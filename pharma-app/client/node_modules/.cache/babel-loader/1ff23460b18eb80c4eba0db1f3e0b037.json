{"ast":null,"code":"import _defineProperty from \"/home/hyperubuntu/Desktop/fabric-material/pharma-app/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _regeneratorRuntime from \"/home/hyperubuntu/Desktop/fabric-material/pharma-app/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/home/hyperubuntu/Desktop/fabric-material/pharma-app/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"/home/hyperubuntu/Desktop/fabric-material/pharma-app/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/hyperubuntu/Desktop/fabric-material/pharma-app/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/hyperubuntu/Desktop/fabric-material/pharma-app/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/hyperubuntu/Desktop/fabric-material/pharma-app/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/hyperubuntu/Desktop/fabric-material/pharma-app/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/home/hyperubuntu/Desktop/fabric-material/pharma-app/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/home/hyperubuntu/Desktop/fabric-material/pharma-app/client/src/PublicLayout.js\";\nimport React, { Component } from 'react';\nimport 'mdbreact/dist/css/mdb.css';\nimport PublicRoutes from \"./PublicRoutes\";\nimport { MDBNavbar, MDBNavbarBrand, MDBNavbarNav, MDBNavbarToggler, MDBCollapse, MDBNavItem, MDBNavLink, MDBDropdown, MDBDropdownToggle, MDBIcon, MDBDropdownMenu, MDBBtn, MDBInput } from \"mdbreact\";\n\nvar PublicLayout =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(PublicLayout, _Component);\n\n  function PublicLayout(props) {\n    var _this;\n\n    _classCallCheck(this, PublicLayout);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(PublicLayout).call(this, props));\n\n    _this.redirectUser = function (path) {\n      _this.props.history.push(path);\n    };\n\n    _this.toggleCollapse = function (collapseID) {\n      return function () {\n        return _this.setState(function (prevState) {\n          return {\n            collapseID: prevState.collapseID !== collapseID ? collapseID : \"\"\n          };\n        });\n      };\n    };\n\n    _this.closeCollapse = function (collapseID) {\n      return function () {\n        return _this.state.collapseID === collapseID && _this.setState({\n          collapseID: \"\"\n        });\n      };\n    };\n\n    _this.handleLoginSubmit = function () {\n      _this.loginfunc().then().catch(function (err) {\n        return console.log(err);\n      });\n    };\n\n    _this.redirectUser = function (path) {\n      _this.props.history.push(path);\n    };\n\n    _this.loginfunc =\n    /*#__PURE__*/\n    _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee() {\n      var id, password, response, body;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              id = _this.state.id;\n              password = _this.state.password;\n              _context.next = 4;\n              return fetch('/sign_in/' + id + '/' + password);\n\n            case 4:\n              response = _context.sent;\n              _context.next = 7;\n              return response.json();\n\n            case 7:\n              body = _context.sent;\n\n              if (!(response.status !== 200)) {\n                _context.next = 10;\n                break;\n              }\n\n              throw Error(body.message);\n\n            case 10:\n              if (body.express.status === 1) {\n                sessionStorage.setItem(\"user\", id);\n\n                if (body.express.userSighnedIn === 1) {\n                  _this.redirectUser('/login/admin');\n                } else if (body.express.userSighnedIn === 2) {\n                  _this.redirectUser('/login/manufac');\n                } else if (body.express.userSighnedIn === 3) {\n                  _this.redirectUser('/login/dist');\n                } else if (body.express.userSighnedIn === 4) {\n                  _this.redirectUser('/login/chem');\n                } else {\n                  console.log(\"user not valid\");\n                }\n              } else if (body.express.status === -2) {\n                console.log(\"user password not valid!!!\");\n              } else {\n                console.log(\"user not found!!!\");\n              }\n\n              return _context.abrupt(\"return\", body);\n\n            case 12:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n    _this.state = {\n      collapseID: \"\",\n      id: \"\",\n      password: \"\",\n      user: \"\"\n    };\n    _this.handleInputChange = _this.handleInputChange.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(PublicLayout, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var user = null;\n\n      if (sessionStorage.getItem(\"user\")) {\n        user = sessionStorage.getItem(\"user\");\n\n        if (user.substring(0, 5) === \"admin\") {\n          this.redirectUser('/login/admin');\n        } else if (user.substring(0, 4) === \"chem\") {\n          this.redirectUser('/login/chem');\n        } else if (user.substring(0, 4) === \"dist\") {\n          this.redirectUser('/login/dist');\n        } else {\n          this.setState({\n            userID: user\n          });\n        }\n      }\n    }\n  }, {\n    key: \"handleInputChange\",\n    value: function handleInputChange(event) {\n      var target = event.target;\n      var value = target.value;\n      var name = target.name;\n      this.setState(_defineProperty({}, name, value));\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var overlay = React.createElement(\"div\", {\n        id: \"sidenav-overlay\",\n        style: {\n          backgroundColor: \"transparent\"\n        },\n        onClick: this.toggleCollapse(\"mainNavbarCollapse\"),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 95\n        },\n        __self: this\n      });\n      var collapseID = this.state.collapseID;\n      return React.createElement(\"div\", {\n        className: \"flyout\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 101\n        },\n        __self: this\n      }, React.createElement(MDBNavbar, {\n        color: \"indigo\",\n        dark: true,\n        expand: \"md\",\n        fixed: \"top\",\n        scrolling: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 102\n        },\n        __self: this\n      }, React.createElement(MDBNavbarBrand, {\n        href: \"/\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 103\n        },\n        __self: this\n      }, \"Pharma Track\"), React.createElement(MDBNavbarToggler, {\n        onClick: this.toggleCollapse(\"mainNavbarCollapse\"),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 106\n        },\n        __self: this\n      }), React.createElement(MDBCollapse, {\n        id: \"mainNavbarCollapse\",\n        isOpen: this.state.collapseID,\n        navbar: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 107\n        },\n        __self: this\n      }, React.createElement(MDBNavbarNav, {\n        right: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 108\n        },\n        __self: this\n      }, React.createElement(MDBNavItem, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 109\n        },\n        __self: this\n      }, React.createElement(MDBNavLink, {\n        exact: true,\n        to: \"/\",\n        onClick: this.closeCollapse(\"mainNavbarCollapse\"),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 110\n        },\n        __self: this\n      }, \"Home\")), React.createElement(MDBNavItem, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 112\n        },\n        __self: this\n      }, React.createElement(MDBNavLink, {\n        onClick: this.closeCollapse(\"mainNavbarCollapse\"),\n        to: \"/verification\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 113\n        },\n        __self: this\n      }, \"Verification\")), React.createElement(MDBNavItem, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 115\n        },\n        __self: this\n      }, React.createElement(MDBDropdown, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 116\n        },\n        __self: this\n      }, React.createElement(MDBDropdownToggle, {\n        nav: true,\n        caret: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 117\n        },\n        __self: this\n      }, React.createElement(MDBIcon, {\n        icon: \"user\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 117\n        },\n        __self: this\n      })), React.createElement(MDBDropdownMenu, {\n        basic: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 118\n        },\n        __self: this\n      }, React.createElement(\"form\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 119\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        class: \"form-group\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 120\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        className: \"h5 text-center mb-4\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 121\n        },\n        __self: this\n      }, \"Sign in\"), React.createElement(MDBInput, {\n        style: {\n          color: \"black\"\n        },\n        label: \"ID\",\n        type: \"text\",\n        name: \"id\",\n        value: this.state.id,\n        onChange: this.handleInputChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 122\n        },\n        __self: this\n      }), React.createElement(MDBInput, {\n        label: \"Password\",\n        style: {\n          color: \"black\"\n        },\n        type: \"password\",\n        name: \"password\",\n        value: this.state.password,\n        onChange: this.handleInputChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 123\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"text-center\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 124\n        },\n        __self: this\n      }, React.createElement(MDBBtn, {\n        size: \"sm\",\n        onClick: this.handleLoginSubmit,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 125\n        },\n        __self: this\n      }, \"Login\")))))))))), collapseID && overlay, React.createElement(\"main\", {\n        class: \"wrapper\",\n        style: {\n          marginTop: \"4rem\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 137\n        },\n        __self: this\n      }, React.createElement(PublicRoutes, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 138\n        },\n        __self: this\n      })), React.createElement(\"footer\", {\n        class: \"public-footer\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 140\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        className: \"footer-copyright mb-0 py-3 text-center\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 141\n        },\n        __self: this\n      }, \"\\xA9 \", new Date().getFullYear(), \" Copyright: Pharma Track\")));\n    }\n  }]);\n\n  return PublicLayout;\n}(Component);\n\nexport default PublicLayout;","map":{"version":3,"sources":["/home/hyperubuntu/Desktop/fabric-material/pharma-app/client/src/PublicLayout.js"],"names":["React","Component","PublicRoutes","MDBNavbar","MDBNavbarBrand","MDBNavbarNav","MDBNavbarToggler","MDBCollapse","MDBNavItem","MDBNavLink","MDBDropdown","MDBDropdownToggle","MDBIcon","MDBDropdownMenu","MDBBtn","MDBInput","PublicLayout","props","redirectUser","path","history","push","toggleCollapse","collapseID","setState","prevState","closeCollapse","state","handleLoginSubmit","loginfunc","then","catch","err","console","log","id","password","fetch","response","json","body","status","Error","message","express","sessionStorage","setItem","userSighnedIn","user","handleInputChange","bind","getItem","substring","userID","event","target","value","name","overlay","backgroundColor","color","marginTop","Date","getFullYear"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport 'mdbreact/dist/css/mdb.css';\nimport PublicRoutes from \"./PublicRoutes\";\nimport { MDBNavbar, MDBNavbarBrand, MDBNavbarNav, MDBNavbarToggler, MDBCollapse,   MDBNavItem, MDBNavLink, MDBDropdown, MDBDropdownToggle, MDBIcon, MDBDropdownMenu, MDBBtn, MDBInput } from \"mdbreact\";\n\nclass PublicLayout extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            collapseID:\"\",\n            id:\"\",\n            password:\"\",\n            user:\"\"\n        };\n        this.handleInputChange = this.handleInputChange.bind(this);\n    }\n\n    redirectUser = (path) => {\n        this.props.history.push(path);\n    }\n\n    componentDidMount(){\n        var user = null;\n        if(sessionStorage.getItem(\"user\")){\n            user = sessionStorage.getItem(\"user\");\n            if(user.substring(0,5)===\"admin\"){\n                this.redirectUser('/login/admin');\n            }else if(user.substring(0,4)===\"chem\"){\n                this.redirectUser('/login/chem');\n            }else if(user.substring(0,4)===\"dist\"){\n                this.redirectUser('/login/dist');\n            }else{\n                this.setState({userID:user});\n            }\n        }\n    }\n\n    handleInputChange(event) {\n        const target = event.target;\n        const value = target.value;\n        const name = target.name;\n        this.setState({\n            [name]: value\n        });\n    };\n\n    toggleCollapse = collapseID => () =>\n        this.setState(prevState => ({\n            collapseID: prevState.collapseID !== collapseID ? collapseID : \"\"\n        })\n    );\n\n    closeCollapse = collapseID => () =>\n        this.state.collapseID === collapseID && this.setState({ collapseID: \"\" });\n\n    handleLoginSubmit = () =>{\n        this.loginfunc()\n        .then()\n        .catch(err => console.log(err));\n    }\n\n    redirectUser = (path) => {\n        this.props.history.push(path);\n    }\n\n    loginfunc = async () => {\n        var id=this.state.id;\n        var password=this.state.password;\n        const response = await fetch('/sign_in/'+id+'/'+password);\n        const body = await response.json();\n        if (response.status !== 200) throw Error(body.message);\n        if(body.express.status===1){\n             sessionStorage.setItem(\"user\",id);\n            if(body.express.userSighnedIn===1){\n                this.redirectUser('/login/admin');\n            }else if(body.express.userSighnedIn===2){\n                this.redirectUser('/login/manufac');\n            }else if(body.express.userSighnedIn===3){\n                this.redirectUser('/login/dist');\n            }else if(body.express.userSighnedIn===4){\n                this.redirectUser('/login/chem');\n            }else{\n                console.log(\"user not valid\");\n            }\n        }else if(body.express.status===-2){\n            console.log(\"user password not valid!!!\");\n        }else{\n            console.log(\"user not found!!!\");\n        }\n        return body;\n    };\n\n    render() {\n        const overlay = (\n            <div id=\"sidenav-overlay\" style={{ backgroundColor: \"transparent\" }} onClick={this.toggleCollapse(\"mainNavbarCollapse\")} />\n        );\n\n        const { collapseID } = this.state;\n\n        return (\n            <div className=\"flyout\">\n                <MDBNavbar color=\"indigo\" dark expand=\"md\" fixed=\"top\" scrolling>\n                    <MDBNavbarBrand href=\"/\">\n                        Pharma Track\n                    </MDBNavbarBrand>\n                    <MDBNavbarToggler onClick={this.toggleCollapse(\"mainNavbarCollapse\")} />\n                    <MDBCollapse id=\"mainNavbarCollapse\" isOpen={this.state.collapseID} navbar>\n                        <MDBNavbarNav right>\n                            <MDBNavItem>\n                                <MDBNavLink exact to=\"/\" onClick={this.closeCollapse(\"mainNavbarCollapse\")} >Home</MDBNavLink>\n                            </MDBNavItem>\n                            <MDBNavItem>\n                                <MDBNavLink onClick={this.closeCollapse(\"mainNavbarCollapse\")} to=\"/verification\" >Verification</MDBNavLink>\n                            </MDBNavItem>\n                            <MDBNavItem>\n                                <MDBDropdown>\n                                    <MDBDropdownToggle nav caret><MDBIcon icon=\"user\" /></MDBDropdownToggle>\n                                    <MDBDropdownMenu basic>\n                                        <form>\n                                            <div class=\"form-group\">\n                                                <p className=\"h5 text-center mb-4\">Sign in</p>\n                                                <MDBInput style={{color:\"black\"}} label=\"ID\" type=\"text\" name=\"id\" value={this.state.id} onChange={this.handleInputChange}/>\n                                                <MDBInput label=\"Password\" style={{color:\"black\"}} type=\"password\" name=\"password\" value={this.state.password} onChange={this.handleInputChange}/>\n                                                <div className=\"text-center\">\n                                                    <MDBBtn size=\"sm\" onClick={this.handleLoginSubmit}>Login</MDBBtn>\n                                                </div>\n                                            </div>\n                                        </form>\n                                    </MDBDropdownMenu>\n                                </MDBDropdown>\n                            </MDBNavItem>\n\n                        </MDBNavbarNav>\n                    </MDBCollapse>\n                </MDBNavbar>\n                {collapseID && overlay}\n                <main class=\"wrapper\" style={{ marginTop: \"4rem\" }}>\n                    <PublicRoutes />\n                </main>\n                <footer class=\"public-footer\">\n                    <p className=\"footer-copyright mb-0 py-3 text-center\">\n                        &copy; {new Date().getFullYear()} Copyright: Pharma Track\n                    </p>\n                </footer>\n            </div>\n        );\n    }\n}\n\nexport default PublicLayout;\n"]},"metadata":{},"sourceType":"module"}